---
title: "Claude Code の7つの拡張機能、結局どう使い分ければいいの？"
source: "https://zenn.dev/tmasuyama1114/articles/claude_code_extension_guide"
author:
  - "[[Zenn]]"
published: 2026-01-04
created: 2026-01-06
description:
tags:
  - "clippings"
  - "claude"
  - "開発"
  - "ツール"
  - "エージェント"
later: false
---
97

66

こんにちは、とまだです。

Claude Code を使っていると、こんな疑問が湧いてきませんか？

「CLAUDE.md、Skills、Sub-agents、MCP、カスタムスラッシュコマンド...いろいろあるけど、どれをどう使えばいいの？」

今回伝えたいことの要点は、 **7つの機能は「2つの軸」で整理すると迷わなくなる** ということです。

軸1は「いつ読み込まれるか」、軸2は「誰が動くか」。この2つの視点で分類すると、それぞれの役割がスッキリ見えてきます。この記事では、7つの機能を2軸で整理し、迷ったときの判断基準まで解説します。

（追記：動画ではより噛み砕いて解説していますので、ぜひご覧ください！）

<iframe src="https://www.youtube-nocookie.com/embed/Oq5cSCOUlGU" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

## 忙しい人のために要約

この記事のポイントを3行でまとめます。

- 軸1「いつ読み込まれる？」で分類すると、常時 / 条件付き / 必要な時 / 手動に分かれる
- 軸2「誰が動く？」で分類すると、Claude本体 / 別プロセス / 外部サービスに分かれる
- したがって、迷ったら「外部連携？」「イベント駆動？」「別コンテキスト？」「常時適用？」の4問で判断できる

---

## 7つの機能、なぜ混乱するのか？

Claude Code の機能が増えた背景には、開発者の多様なニーズがあります。

最初は CLAUDE.md だけでシンプルな仕組みでした。ただ、使い込んでいくうちに課題が出てきたわけです。たとえば、CLAUDE.md が肥大化してコンテキストを圧迫したり、外部ツールとの連携が欲しくなったり。

そこで、こうしたニーズに応えるかたちで、.claude/rules/、Skills、Sub-agents、MCP、カスタムコマンド、そして Hooks が追加されていきました。

「全部同じに見える」と感じるのは無理もありません。ただ、 **2つの軸で整理すると、それぞれの違いがハッキリ見えてくる** のではないでしょうか。

---

## 7つの機能を「2つの軸」で整理する

「結局どれを使えばいいの？」と思った方もいるかもしれません。そこで、7つの機能を2つの軸で分類してみましょう。

まず、軸1は「いつ読み込まれるか」です。

| 分類 | 機能 |
| --- | --- |
| 常時 | CLAUDE.md |
| 条件付き（特定ファイル操作時） | .claude/rules/ |
| 条件付き（イベント発火時に必ず実行） | Hooks |
| 必要な時だけ（Claude が判断） | Skills |
| 必要な時だけ（依頼時） | Sub-agents |
| 必要な時だけ（外部連携時） | MCP |
| 手動（ユーザーが実行） | カスタムコマンド |

次に、軸2は「誰が動くか」です。

| 分類 | 機能 |
| --- | --- |
| Claude 本体 | CLAUDE.md,.claude/rules/, Skills, カスタムコマンド |
| 別プロセス（独立したコンテキスト） | Sub-agents |
| 外部シェルコマンド | Hooks |
| 外部サービス | MCP |

つまり、 **Claude 本体の「知識を増やす」機能と、「別の誰かに任せる」機能** という大きな違いがあるわけです。この視点を持つと、どの機能を使うべきか判断しやすくなります。

---

## 各機能の役割と使いどころ

それぞれの機能を、2軸の視点で見ていきましょう。

イメージとしては、Claude Code を「 **コンビニで働く店員** 」と考えてみてください。7つの機能は、この店員を効果的に動かすための仕組みであり、コンビニ店舗の仕組みに対応しています。

| 機能 | コンビニでの例え | 役割 |
| --- | --- | --- |
| CLAUDE.md | 全店共通マニュアル | どのシフトでも守る基本ルール |
| .claude/rules/ | 売り場別ルール | ホットスナック担当、レジ担当で違う手順 |
| Skills | バックヤードのマニュアル棚 | 必要な時に取り出す専門知識 |
| Sub-agents | 本部のサポートセンター | 電話で聞いて回答だけもらう |
| MCP | Loppi や Famiポート端末 | 外部システムにつながる窓口 |
| カスタムコマンド | レジの定型フレーズ | 「袋いりますか？」とワンパターンで対応 |
| Hooks | 入店センサーの「ピンポーン」 | お客さんが入ったら100%鳴る |

この対応関係を頭に入れておくと、各機能の説明がより理解しやすくなるのではないでしょうか。

### CLAUDE.md：常に適用される基本ルール

軸の位置は「 **常時** × Claude本体」になります。

コンビニで言えば **全店共通のマニュアル** です。新人バイト（Claude）が入ったら、まずこのマニュアルを読んで「いらっしゃいませ」と挨拶する、レジでは両手でお金を受け取る、といった基本動作を覚えます。どの店舗でも、どのシフトでも必ず守るルールです。

CLAUDE.md は、Claude Code が **起動時に自動で読み込む** ファイルです。そのため、「毎回『インデントはスペース2つで』『コミットメッセージは日本語で』と説明するの、面倒だな...」という悩みを解決してくれます。一度書いておけば、以降は自動で適用されるわけです。

```markdown
# プロジェクトルール
- インデントはスペース2つ
- コミットメッセージは日本語で
- テストは必須
```

この機能が向いているケースは、たとえば以下のようなものです。

- コーディング規約（インデント、命名規則など）
- 禁止事項（特定のライブラリを使わないなど）
- アーキテクチャの基本方針

一方で、CLAUDE.md が肥大化するとコンテキストを圧迫するという課題もあります。「今 TypeScript を書いているのに、Markdown のルールまで読み込まれている」といった無駄が生じることがあるからです。

CLAUDE.mdの基本的な書き方や配置場所については、別な記事で詳しく解説しています。

### .claude/rules/：条件付きで適用されるルール

軸の位置は「 **条件付き** × Claude本体」になります。

コンビニで言えば **売り場別のルール** です。ホットスナックコーナーでは「調理時間を記録する」「廃棄時間を守る」、レジでは「年齢確認必須商品に注意」「ポイントカードを確認」など、担当する売り場によって適用されるルールが変わります。

.claude/rules/ は、CLAUDE.md の肥大化問題を解決するための仕組みです。具体的には、「フロントエンドとバックエンドでルールが違うのに、全部のルールが毎回読み込まれる...」という悩みを解決します。 `paths` 指定により「特定のファイルを操作した時だけ読み込む」という条件付きルールを作れるわけです。

```yaml
---
paths: src/api/**/*.ts
---

# API 開発ルール
- 全エンドポイントで入力検証必須
- 標準エラーレスポンス形式を使用
```

この設定により、 `src/api/` 配下の TypeScript ファイルを触った時だけ、このルールがコンテキストに追加されます。

.claude/rules/ の詳しい設定方法については、別な記事で詳しく解説しています。

この機能が向いているケースは、たとえば以下のようなものです。

- フロントエンド / バックエンドで異なるルール
- 特定ディレクトリ固有の規約
- ファイル種別ごとの設定

### Skills：必要な時だけ読み込まれる知識

軸の位置は「 **必要時（Claude判断）** × Claude本体」になります。

コンビニで言えば **バックヤードに置いてあるマニュアル棚** です。普段は棚に並んでいるだけですが、「クリスマスケーキの予約受付が始まった」と判断したら、そのマニュアルを取り出して手順を確認します。棚のラベル（description）を見て「このマニュアルが必要だ」と自分で判断するわけです。

Skills は、Claude が「この知識が必要だ」と判断した時だけ読み込まれる仕組みです。そのため、「デザインシステムのガイドライン、毎回プロンプトに貼り付けるの大変...」という悩みを解決してくれます。普段は名前と説明だけがメモリに常駐し、必要な時だけ本体が読み込まれるからです。

```yaml
---
name: frontend-design
description: フロントエンドのデザインルール。UI実装時に自動適用。
---

# デザインルール

このスキルでは、以下のカラーパレットを使用します。

- Primary: #3B82F6
- Secondary: #10B981
```

たとえば、「React のコンポーネントを作って」とお願いすると、Claude は自動的に `frontend-design` の知識を参照して作業してくれます。

この機能が向いているケースは、たとえば以下のようなものです。

- デザインシステムのガイドライン
- 特定技術のベストプラクティス
- 参照頻度が低いが重要な知識

一方で、Skills の説明文（description）が曖昧だと、Claude が必要な時に読み込んでくれないという課題もあります。したがって、「何ができて、いつ使うのか」を具体的に書く必要があるわけです。

SkillsとSub-agentsの使い分けについては、別な記事で詳しく解説しています。

Skillsの具体的な作り方については、別な記事で詳しく解説しています。

### Sub-agents：別コンテキストで動く分身

軸の位置は「 **必要時（依頼時）** × **別プロセス** 」になります。

コンビニで言えば **本部のサポートセンターへの電話** です。「この商品、返品対応どうすればいいですか？」と電話で聞くと、本部のスタッフが調べて回答してくれます。途中経過は聞かず、結論だけ受け取る。自分のレジ業務は中断せずに済みます。

Sub-agents は、メインの Claude とは **別のコンテキスト** で動きます。そのため、「100ファイル以上あるコードベースを調査したら、コンテキストがパンパンになった...」という悩みを解決してくれます。大量のファイルを読み込んで調査しても、メインの会話履歴は汚れません。なぜなら、最終的な結果のサマリーだけが返ってくるからです。

```yaml
---
name: code-reviewer
description: コード品質とセキュリティをチェック。コード修正後に自動委譲。
tools: Read, Grep, Glob, Bash
---

あなたはシニアコードレビュアーです。
```

この機能が向いているケースは、たとえば以下のようなものです。

- 大規模なコードベース調査
- 専門的なレビュー（セキュリティ、パフォーマンスなど）
- メインの会話を汚したくない重い処理

ただし、メインの会話内容を Sub-agents は知らないため、必要な情報は明示的に渡す必要があります。したがって、「依頼内容を明確に伝える」ことが重要になるわけです。

### MCP：外部ツールとの接続手段

軸の位置は「 **必要時（外部連携時）** × **外部サービス** 」になります。

コンビニで言えば **Loppi や Famiポートなどのマルチメディア端末** です。コンサートチケットの購入、公共料金の支払い、住民票の取得など、コンビニ店員だけではできないことを、外部システムにつながって実現します。店員の知識ではなく、外との接続が必要な処理です。

MCP（Model Context Protocol）は、Claude Code を **外部ツールやデータベース、API と接続する** 仕組みです。そのため、「データベースに直接クエリを投げたい」「Slack にメッセージを送りたい」という悩みを解決してくれます。これまでの機能が Claude の「知識」を拡張するものだったのに対し、MCP は「外の世界との接続」を担います。

```bash
# GitHub との連携
claude mcp add --transport http github https://mcp.github.com

# データベースとの連携
claude mcp add --transport stdio postgres -- python postgres-mcp.py
```

この機能が向いているケースは、たとえば以下のようなものです。

- データベースへのアクセス
- 外部 API との連携（GitHub, Slack など）
- ファイルシステム以外のリソース操作

一方で、MCP サーバーの設定には一定の技術的知識が必要です。また、外部サービスに依存するため、ネットワークの問題や認証エラーが発生する可能性もあります。

MCPの仕組みや基本的な設定方法については、別な記事で詳しく解説しています。

### カスタムコマンド：定型操作のショートカット

軸の位置は「 **手動（ユーザー実行）** × Claude本体」になります。

コンビニで言えば **レジでの定型フレーズ** です。「袋いりますか？」「ポイントカードはお持ちですか？」「お箸おつけしますか？」といった決まり文句。毎回言葉を考えなくても、決まったフレーズでスムーズに接客できます。

カスタムコマンドは、よく使うプロンプトを **`/コマンド名` で呼び出せる** ようにする仕組みです。そのため、「毎回『mainブランチとの差分を確認して、コミットメッセージを提案して』と打つの面倒...」という悩みを解決してくれます。

```markdown
\`git status\`
```

この機能が向いているケースは、たとえば以下のようなものです。

- コミット作成
- テスト実行
- デプロイ準備

なお、Skills と違って自動では呼び出されません。ユーザーが明示的に `/commit` などと実行する必要があります。

カスタムコマンドの詳しい作り方については、別な記事で詳しく解説しています。

また、YAMLフロントマターの設定や引数の受け取り方については、別な記事で詳しく解説しています。

### Hooks：イベント発火時に必ず実行されるコマンド

軸の位置は「 **条件付き（必ず実行）** × **外部シェルコマンド** 」になります。

コンビニで言えば **入店センサーの「ピンポーン」という音** です。お客さんがドアを開けたら、店員が気づいていなくても必ず鳴る。100%自動で発動し、止めることはできません。

Hooks は、特定のライフサイクルイベントが発生した時に **必ず実行される** シェルコマンドです。.claude/rules/ も条件付きですが、Hooks との違いは「決定論的に実行される」点です。条件が満たされれば、100%実行されます。

代表的なイベントには以下のようなものがあります。

| イベント | 発火タイミング |
| --- | --- |
| SessionStart | セッション開始時 |
| PreToolUse | ツール実行前 |
| PostToolUse | ツール実行後 |
| Stop | タスク完了時 |

設定は `.claude/settings.json` で行います。

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "command": "npx prettier --write $CLAUDE_FILE_PATH"
      }
    ]
  }
}
```

この機能が向いているケースは、たとえば以下のようなものです。

- ファイル編集後の自動フォーマット
- セッション開始時の環境セットアップ
- タスク完了時の通知
- 危険なコマンドのブロック

一方で、シェルスクリプトの知識が必要になる点や、設定ミスでワークフローが止まる可能性がある点には注意が必要です。

Hooks の詳しい解説は、別な記事で詳しく解説しています。

---

## 迷ったら「4つの質問」で決める

「どれを使えばいいか、まだよくわからない...」と思った方もいるかもしれません。そこで、新しい要件が出たとき、以下の質問で判断できます。

質問1は「外部との連携が必要？」です。  
Yes なら **MCP** を選びましょう。

質問2は「イベント駆動で自動実行したい？」です。  
Yes なら **Hooks** を選びましょう。ファイル編集後の自動フォーマットや、タスク完了時の通知など、特定のタイミングで必ず実行したい処理に向いています。

質問3は「独立したコンテキストで作業させたい？」です。  
Yes なら **Sub-agents** を選びましょう。

質問4は「Claude 本体の知識・ルールを拡張したい？」です。この場合は、さらに細かく分類されます。

| 質問 | 選択肢 |
| --- | --- |
| 常に適用したい？ | CLAUDE.md |
| 特定条件でだけ適用したい？ | .claude/rules/ |
| 必要な時だけ読み込みたい？ | Skills |
| ワンクリックで実行したい？ | カスタムコマンド |

ただ、迷うケースもあります。たとえば「コードレビューのルール」は CLAUDE.md に書くべきか、Skills にすべきか。私の判断基準は「常時意識してほしいか、特定タスクだけか」です。

具体的には、以下のように使い分けています。

- 常にレビュー観点を意識してほしい → CLAUDE.md
- レビュー時だけ詳細なチェックリストを使いたい → Skills

もちろん、正解は一つではなく、プロジェクトや好みによって変わります。

なお、Anthropic公式が推奨するベストプラクティスについては、別な記事で詳しく解説しています。

---

## デメリットと限界

ここまで7つの機能を紹介してきましたが、正直に課題もお伝えします。

**学習コストがある**

機能が7つもあると、それぞれの役割と設定方法を覚えるだけでも時間がかかります。ただ、Claude Code を使い始めたばかりの段階で、すべてを理解する必要はないと考えています。まずは CLAUDE.md から始めて、必要に応じて他の機能を追加していくのがよいでしょう。

**グレーゾーンが存在する**

「どこに書くか」で迷うケースは確実にあります。たとえば、Skills と Sub-agents の境界線は曖昧です。私自身、試行錯誤しながら使い分けを調整しています。

**設定ファイルが分散する**

さらに、CLAUDE.md、.claude/rules/、.claude/skills/、.claude/agents/、.claude/commands/...と、設定ファイルがあちこちに分散します。そのため、プロジェクトによっては管理が煩雑になることもあるでしょう。

---

## まとめ

7つの機能は「2つの軸」で整理すると迷わなくなります。

おさらいすると、以下のとおりです。

- 軸1「いつ読み込まれる？」で分類すると、常時 / 条件付き / 必要な時 / 手動に分かれる
- 軸2「誰が動く？」で分類すると、Claude本体 / 別プロセス / 外部シェルコマンド / 外部サービスに分かれる

したがって、迷ったときは「外部連携？」「イベント駆動？」「別コンテキスト？」「常時適用？」の4問で判断してみてください。

「完璧な使い分け」を目指すより、まず使ってみて調整するのがよいと考えています。

Claude Codeをこれから始める方は、まず基本的な使い方から理解すると良いでしょう。

97

66